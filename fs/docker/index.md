# Используем docker для веб-разработки на php

## Как php работает на вебе

Когда мы пишем веб-приложение (сайт) на php, мы не реализуем [веб-сервер](https://ru.wikipedia.org/wiki/%D0%92%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80). На самом деле мы пишем только кусочек веб-приложения, который потом соединяется с одним из универсальных веб-серверов.

```
actor Пользователь

Пользователь -> Браузер: нажимает ссылку
Браузер -> "Веб-сервер": HTTP-запрос
"Веб-сервер" -> PHP
PHP -> PHP: echo "hello, world";
PHP --> "Веб-сервер": "hello, world"
"Веб-сервер" --> Браузер: HTTP-ответ
Браузер --> Пользователь: отображает страницу
```

На [хостинге](https://ru.wikipedia.org/wiki/%D0%A5%D0%BE%D1%81%D1%82%D0%B8%D0%BD%D0%B3) веб-сервер обычно уже настроен и вам нужно просто положить ваши php-файлы в определённую папку, что бы всё заработало. При разработке веб-приложения на своём компьютере, придётся установить и настроить какой-нибудь веб-сервер.

## Веб-серверы

[php -S](https://www.php.net/manual/ru/features.commandline.webserver.php) -- примитивный веб-сервер, который у вас уже есть, если у вас установлен php. Его возможностей достаточно для обучения или совсем несложных проектов.

[apache](https://httpd.apache.org/docs/2.4/) -- популярный веб-сервер, который чаще всего связывается с php с помошью специального модуля. Я бы рекомендовал его, если вы работаете с готовым проектом, который расчитан на интеграцию именно с apache.

[nginx](https://nginx.org/ru/docs/) -- один из самых популярных веб-серверов у разработчиков на php. nginx интегрируется с php через [fastCGI](https://ru.wikipedia.org/wiki/FastCGI). Для большинства проектов я бы советовал именно его.

apache или nginx можно просто установить на свой компьютер и настроить как надо. Для новичков настройка может показаться сложной, поэтому существуют проекты-сборки типа LAMP, которые содержат всё необходимое для разработки с подходящими настройками. Я бы не советовал новичкам использовать такие сборки (xampp, openserver, denver...). Если вы только изучаете php, то воспользуйтесь [встроенным сервером](https://www.php.net/manual/ru/features.commandline.webserver.php), это позволит вам лучше понять как всё работает. А когда возможностей встроенного сервера вам станет мало, научитесь настраивать, например, nginx.

## docker

Сегодня разработчики не устанавливают на свои компьютеры apache или nginx обычным способом. Дело в том, что один разработчик на одном компьютере может разрабатывать много разных приложений с разными требованиями к веб-серверам и их настройкам. Docker предоставляет возможность завести совершенно разные окружения (веб-серверы, базы данных и прочее) для разных проектов.

Вот как это работает:

+ Ваша операционная система умеет запустить контейнер -- ещё одну виртуальную систему внутри себя. В таком контейнере может быть запущено любое приложение, например php или веб-сервер. При этом запущенное приложение будет изолированно от всего остального, что есть на вашем компьютере.
+ Контейнеров может быть несколько и можно настроить связь между ними. Таким образом каждый компонент вашего прилложения запускается в отдельном контейнере и взаимодействует с другими компонентами по виртуальной сети.
+ docker позволяет вам описать все необходимые для работы приложения компоненты и запускать и останавливать их вместе.

Получается, что для организации разработки на вашем компьютере, вам надо установить docker и в каждом проекте описать необходимое окружение в специальном формате. После этого, для работы над проектом, надо перейти в соответствующую папку и запустить виртуальное окружение и локальный сайт станед доступен из браузера.

## Пример с комментариями


