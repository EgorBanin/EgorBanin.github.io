# Как сдавать проблему в бэк (и не только)

## Сдавайте запросы

Мы разрабатываем API и часто не подозреваем о том, как выглядят и работают интерфейсы клиентов. Если вы нажали на кнопку в приложении и что-то пошло не так, это не поможет нам найти проблему. Если вы сделали запрос и получили неожиданный ответ, -- другое дело.

Описание запроса на естественном языке тоже малополезно. Если вы "подёргали ручку Pincode", то догадаться о методе, заголовках и других параметрах запроса сложно. Например, у вас опечатка в url'е, тогда, имея только текстовое описание, разработчик не сможет это заметить.

Лучший формат запросов это команда curl, которую разработчик может скопировать, выполнить и убедиться, что проблема существует. Синтаксис команды очень простой:

```
curl -X POST 'https://...' \
-H 'header1...' \
-H 'header2...' \
-d '
{
    "foo": "bar"
}
'
``` 

В консоли разработчика в браузере curl можно скопировать щёлкнув по запросу и выбрав копировать -> копировать cURL. Такая же функциональность есть и в postman'е и некоторых других инструментах.

GET-запросы без специальных заголовков можно прислать как ссылку (например: https://api.more.tv/web/projects/1).

Прежде чем отправлять команду или ссылку убедитесь, что она работает.

## Сдавайте ответы

Самый глупый способ отправить текстовый файл -- сделать его скриншот. Не делайте скриншот json-ответа. Лучше добавьте к curl-команде текст ответа, оформив его как код (в jira {code}ответ тут...{code} в slack'е используйте markdown-разметку или ctrl+alt+shift+c).

Если вы хотите обратить внимание на какую-то часть запроса, можете адресовать к ней используя JSONPath (синтаксис очень простой: data.items[2].genres[0].id).

## Тегайте правильно

Если вы хотите призвать кого-то в задачу или чат, то позаботьтесь о том, чтобы вновь прибывший получил полное представление о проблеме. Если вопрос не сформулирован сообщением выше, то сформулируйте его в сообщении с тегом.

Плохо:

> ... 100500 сообщений в треде
> -- А ещё у меня греется бук, когда строит красно-чёрное дерево
> -- @Егор

Хорошо:

> ... 100500 сообщений в треде
> -- А ещё у меня греется бук, когда строит красно-чёрное дерево
> -- @Егор выше ребята интересовались может ли в ручке /web/digestProjects/[id] коллекция data.items[n].genres быть пустой? Они проверили спецификацию, но не нашли там ответа.


## Проверяйте свои гипотезы сами

Если что-то не работает как надо, то обязательно убедитесь, что это действительно так. Проверьте предусловия.

Проверьте данные. Пользователь, подписку которого вы получаете, точно имеет подписки? Не доверяйте памяти, проверьте. Если вы всегда использовали этого пользователя и у него были подписки, то это не значит, что и сейчас они есть у него. Время течёт, данные меняются.

Проверьте логику. Будущие проекты точно должны быть исключены из выборки? Вы внимательно читали ТЗ? Может быть там как раз написано, что при отсутствии фильтров, кроме фильтра по категории, будущие серии должны присутствовать в выборке. Проверьте.

Если вы считаете, что нашли проблему. То добавьте в сообщение результаты своих изысканий. Раз уж у вас уже открыто ТЗ, добавьте ссылку, чтобы разработчик не искал его сам. Ссылка также поможет среагировать, если окажется что существуют разные версии документации.

## Задавайте правильные вопросы

Хороший вопрос позволяет дать хороший ответ.

Плохо:

> -- Когда вы катились на стэйдж последний раз?

О чём именно идёт речь? Панталасса, цмс, опочтли, пангея, дагон, ...? С какой точностью нужен ответ? В этом году катились. Что даст время? Если вы столкнулись с проблемой на какой-то конкретной ручке, то зачем это скрывать?

Хорошо:

> -- Сегодня заметили, что панталасса выдаёт новый код ошибки на ручке `POST /web/Auth/Login` на стэйдже, если логиниться с пустым паролем.
>```
>curl -X POST 'http://panthalassa.ingress.videomore.ru/web/Auth/Login' \
>-d '
>{
>    "email": "testuser01_gbanin@more.tv",
>    "password": ""
>}
>'
>```
>errors[0].code: "UNN000"
>Мы использовали этот код, чтобы обработать эту ошибку и ожидали там 401. Почему код изменился и что он означает?


## Полюбите ссылки

Ссылки экономят кучу времени. Владея технологией гипертекста очень дико вспоминать "ту задачу, ну по которой ТЗ ещё недавно переписывали, ну вчера обсуждали... нет после обеда". На ТЗ, задачи, ручки апи, страничку сериала, сообщения в треде можно и нужно ссылаться.

Если сослаться надо на что-то, на что сослаться с помощью ссылки нельзя (письмо, устные договорённости), то стоит применить цитирование.

Плохо:

> -- Какой статус по тому багу с будущими сериями?

> -- Я на прошлой неделе отправлял тебе письмо. Там был вброс от Дениса. Что думаешь? 

Хорошо:

> -- Вижу что баг https://jira.more.tv/browse/MB-2247 с оценкой в 2h висит в статусе in progress уже два дня, есть какие-то трудности с его исправлением?

> -- Я на прошлой неделе отправлял тебе письмо. Там был вброс от Дениса. Он предложил переписать дагон на го. Это якобы сделает нас в три раза быстрее. Что думаешь?  


## Не ленитесь

Чтобы сдать проблему хорошо надо потрудиться. Иногда хочется просто свалить всё это на кого-нибудь другого. Но удержитесь от этого соблазна. Время, потраченное на составление запроса, чтение ТЗ, добавление ссылок, окупится лучшим пониманием работы приложения, которое вы разрабатываете, и всего моря. Это понимание сделает вас более ценным сотрудником, а моретв более качественным сервисом.